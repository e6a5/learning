# ğŸ§ª Makefile for Testing Validation Functions

.PHONY: help test coverage bench clean fmt vet deps

# Default target
help:
	@echo "ğŸ§ª Testing Basics - Available Commands:"
	@echo ""
	@echo "ğŸ§ª Testing:"
	@echo "  test            - Run all unit tests"
	@echo "  test-verbose    - Run tests with verbose output"
	@echo ""
	@echo "ğŸ“Š Coverage:"
	@echo "  coverage        - Run tests with coverage report"
	@echo "  coverage-html   - Generate HTML coverage report"
	@echo ""
	@echo "ğŸš€ Performance:"
	@echo "  bench           - Run benchmark tests"
	@echo ""
	@echo "ğŸ”§ Development:"
	@echo "  fmt             - Format code"
	@echo "  vet             - Run go vet"
	@echo "  deps            - Download dependencies"
	@echo "  clean           - Clean test artifacts"

# Basic testing
test:
	@echo "ğŸ§ª Running unit tests..."
	go test ./models -v

test-verbose:
	@echo "ğŸ§ª Running tests with verbose output..."
	go test ./models -v -count=1

# Coverage testing
coverage:
	@echo "ğŸ“Š Running tests with coverage..."
	go test ./models -coverprofile=coverage.out
	go tool cover -func=coverage.out

coverage-html: coverage
	@echo "ğŸ“Š Generating HTML coverage report..."
	go tool cover -html=coverage.out -o coverage.html
	@echo "âœ… Coverage report generated: coverage.html"
	@echo "ğŸ’¡ Open with: open coverage.html"

# Benchmark testing
bench:
	@echo "ğŸš€ Running benchmark tests..."
	go test ./models -bench=. -benchmem

# Development commands
fmt:
	@echo "ğŸ¨ Formatting code..."
	go fmt ./...

vet:
	@echo "ğŸ” Running go vet..."
	go vet ./...

deps:
	@echo "ğŸ“¦ Downloading dependencies..."
	go mod download
	go mod tidy

# Clean up
clean:
	@echo "ğŸ§¹ Cleaning up test artifacts..."
	rm -f coverage.out coverage.html
	go clean -testcache
	@echo "âœ… Cleanup complete"

# Quick development workflow
dev: fmt vet test
	@echo "âœ… Development checks passed"

# Show what we actually test
show-tests:
	@echo "ğŸ“‹ Test Functions:"
	@grep "^func Test" models/user_test.go
	@echo ""
	@echo "ğŸ“‹ Benchmark Functions:"
	@grep "^func Benchmark" models/user_test.go 